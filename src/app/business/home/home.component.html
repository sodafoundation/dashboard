<p-growl [value]="msgs" [sticky]="false" [life]="6000" [baseZIndex]="9999"></p-growl>
<div class="home-font-color-class ui-home-container" >
    <div class="ui-home-backend-container">
        <div #svgCon>
            <svg width="240" height="64" xmlns="http://www.w3.org/2000/svg" viewBox="0,0,240,64" [ngStyle]="{'transform': 'scale('+ scaleX +', '+ scaleY +')'}">
                <g>
                    <title>Layer 1</title>
                    <path #path d="m10.5,31.5c0,-14.91713 49.00276,-27 109.49999,-27c60.49723,0 109.49999,12.08287 109.49999,27c0,14.91713 -49.00276,27 -109.49999,27c-60.49723,0 -109.49999,-12.08287 -109.49999,-27z" stroke-opacity="null" stroke-linecap="null" stroke-linejoin="null" stroke-width="null" fill-opacity="null" fill="none"/>
                </g>
            </svg>
            <div joyrideStep="homeAddBackendBtn" stepPosition="bottom" text="Click here to add backends spanning different cloud vendors and even on premise clusters." (click)="showRegister()" class="ui-home-backend-add">+</div>
            <div joyrideStep="homeAllBackends" stepPosition="bottom" text="Click here to view all Other Backends (YIG, CEPH, and other File Storage)" (click)="showBackendsDetail()" class="cloud-center" >
                <div class="ui-home-backend-count">{{allBackends_count.localBKD}}</div>
            </div>
            <div joyrideStep="homeAWSBackends" stepPosition="left" text="Click here to view all AWS S3 Backends" #cloud_aws class="cloud" (click)="showBackendsDetail('aws-s3')">
                <div class="ui-home-backend-count">{{allBackends_count.aws}}</div>
                <div class="ui-home-backend-logo">
                    <img src="assets/business/images/common/aws.svg" width="64px"/>
                </div>
                <div class="ui-home-backend-name">
                    <span>Amazon S3</span>
                </div>
            </div>
            <div joyrideStep="homeAzureBackends" stepPosition="left" text="Click here to view all Azure Backends" #cloud_hw class="cloud" (click)="showBackendsDetail('azure-blob')">
                <div class="ui-home-backend-count">{{allBackends_count.azureblob}}</div>
                <div class="ui-home-backend-logo">
                    <img src="assets/business/images/common/azure.svg"  width="64px"/>
                </div>
                <div class="ui-home-backend-name">
                    <span>Azure Storage</span>
                </div>
            </div>            

            <div joyrideStep="homeHuaweiBackends" stepPosition="left" text="Click here to view all Huawei Backends" #cloud_hw_p class="cloud" (click)="showBackendsDetail('hw-obs')">
                <div class="ui-home-backend-count">{{allBackends_count.huaweipub}}</div>
                <div class="ui-home-backend-logo">
                    <img src="assets/business/images/common/huawei.svg"  width="64px"/>
                </div>
                <div class="ui-home-backend-name">
                    <span>Huawei</span>
                </div>
            </div>
            <div joyrideStep="homeIBMBackends" stepPosition="left" text="Click here to view all IBM Backends" #cloud_ibmcos class="cloud" (click)="showBackendsDetail('imb-cos')">
                <div class="ui-home-backend-count">{{allBackends_count.ibmcos}}</div>
                <div class="ui-home-backend-logo">
                    <img src="assets/business/images/common/ibm.svg"  width="64px"/>
                </div>
                <div class="ui-home-backend-name">
                    <span>IBM COS</span>
                </div>
            </div>

            <div joyrideStep="homeGCPBackends" stepPosition="left" text="Click here to view all GCP Backends" #cloud_gcp class="cloud" (click)="showBackendsDetail('gcp-s3')">
                <div class="ui-home-backend-count">{{allBackends_count.gcp}}</div>
                <div class="ui-home-backend-logo">
                    <img src="assets/business/images/common/google.svg"  width="64px"/>
                </div>
                <div class="ui-home-backend-name">
                    <span>GCP</span>
                </div>
            </div>
            <div joyrideStep="homeAlibabaBackends" stepPosition="left" text="Click here to view all Alibaba Backends" #cloud_alibaba class="cloud" (click)="showBackendsDetail('alibaba-oss')">
                <div class="ui-home-backend-count">{{allBackends_count.alibaba}}</div>
                <div class="ui-home-backend-logo">
                    <img src="assets/business/images/common/alibaba-cloud.png"  width="64px"/>
                </div>
                <div class="ui-home-backend-name">
                    <span>Alibaba Object Storage</span>
                </div>
            </div>
        </div>
        <div class="bg" #circleCon>
            <svg width="240" height="64" xmlns="http://www.w3.org/2000/svg" [ngStyle]="{'transform': 'scale('+ scaleX +', '+ scaleY +')'}">
                <use xlink:href="assets/business/images/common/opensds.svg#ic_cloud_circle" />
            </svg>
        </div>
    </div>
    <div style="display:flex;" >
        <div joyrideStep="homeResourceCard" stepPosition="top" text="You can see the number of volumes provisioned, buckets created and Fileshares created."  style="flex:1;padding:20px;">
            <p-card styleClass="ui-card-shadow">
                <div class="ui-card-title">Resource</div>
                <div class="ui-home-card">
                    <div class="ui-home-card-count">
                        <div class="ui-home-card-num">{{counts.volumesCount}}</div>
                        <div class="ui-home-card-img volume"></div>
                        <div class="ui-home-card-text">Volumes</div>
                    </div>
                    <div class="ui-home-card-count">
                        <div class="ui-home-card-num">{{counts.bucketsCount}}</div>
                        <div class="ui-home-card-img bucket"></div>
                        <div class="ui-home-card-text">Buckets</div>
                    </div>
                    <div class="ui-home-card-count gray" >
                        <div class="ui-home-card-num">0</div>
                        <div class="ui-home-card-img file"></div>
                        <div class="ui-home-card-text">Filesystems</div>
                    </div>
                </div>
            </p-card>
        </div>
        <div joyrideStep="homeDataflowCard" stepPosition="top" text="You can see the number of migrations and replications here." style="flex:1;padding:20px;" >
            <p-card  styleClass="ui-card-shadow">
                    <div class="ui-card-title">Dataflow Quantity</div>
                <div class="ui-home-card">
                    <div class="ui-home-card-count">
                        <div class="ui-home-card-num">{{counts.migrationCount}}</div>
                        <div class="ui-home-card-img migration"></div>
                        <div class="ui-home-card-text">Migrations</div>
                    </div>
                    <div class="ui-home-card-count gray">
                        <div class="ui-home-card-num">0</div>
                        <div class="ui-home-card-img replication"></div>
                        <div class="ui-home-card-text">Replications</div>
                    </div>
                </div>
            </p-card>
        </div>
    </div>
    
</div>

<p-dialog styleClass="modify-backend-dialog" header="Modify" [(visible)]="modifyBackendshow" [width]="600" modal="modal" [closeOnEscape]="false" [closable]="false"> 
    <form [grid]="{label: 'ui-g-3', content:'ui-g-20'}" [formGroup]="modifyBackendForm" [errorMessage]="errorMessage">
        <form-item label="Access Key" [required]="true">
            <input type="text" pInputText formControlName="ak" />
        </form-item>
        <form-item label="Secret Key" [required]="true">
            <input type="password" pInputText formControlName="sk" />
        </form-item>
    </form>
    <p-footer>
        <button type="button" pButton (click)="modifyBackend()"  label="{{I18N.keyID['ok']}}"></button>
        <button type="button" pButton (click)="closeModify()"  label="{{I18N.keyID['cancel']}}"></button>
    </p-footer>
</p-dialog>
<p-confirmDialog></p-confirmDialog>
<p-sidebar [(visible)]="showRightSidebar" (onHide)="closeSidebar()" position="right" styleClass="home-sidebar-panel ui-sidebar-lg" [autoZIndex]="true" [baseZIndex]="1000">
    <div *ngIf="showRegisterFlag" class="right-sidebar-content-wrapper">
        <div class="right-sidebar-header">
            <h1 style="font-weight:normal">Register Backend</h1>
        </div>
        <div class="right-sidebar-body">
            <form [grid]="{label: 'ui-g-5', content:'ui-g-20'}" [formGroup]="backendForm" [errorMessage]="errorMessage">
                <form-item label="Name" [required]="true">
                    <input id="name" type="text" name="name" formControlName="name"  pInputText />
                </form-item>
                <form-item label="Type" [required]="true">
                    <p-dropdown [style]="{'min-width':'220px'}" (onChange)="selectOption()" placeholder="Please select" formControlName="type" [options]="allTypes" filter="true"  ></p-dropdown>
                </form-item>
                <form-item *ngFor="let item of formItemCopy" [label]="item.label" [required]="item.required">
                    <input [id]="item.id" [type]="item.type" [name]="item.name"  [formControlName]="item.formControlName"  pInputText />
                </form-item>
            </form>
        </div>
        <div class="right-sidebar-footer">
            <div style="margin-top:100px;">
                <button type="button" class="ui-button-secondary" pButton (click)="createBackend()" label="{{I18N.keyID['ok']}}" ></button>
                <button pButton type="button" (click)="closeSidebar()" label="Cancel" class="ui-button-default"></button>
            </div>
        </div>
    </div>

    <div *ngIf="showBackends"  class="right-sidebar-content-wrapper">
        <div class="right-sidebar-header">
            <h1 style="font-weight:normal">Storage Backends</h1>
        </div>
        <div class="right-sidebar-body">
            <p-dataTable id="home-backend-detail" [value]="typeDetail" [rows]="10">
                <p-column field="name" header="{{I18N.keyID['sds_block_volume_name']}}" ></p-column>
                <p-column field="typeName" header="Type" ></p-column>
                <p-column field="bucketName" header="Bucket"></p-column>
                <p-column header="{{I18N.keyID['sds_block_volume_operation']}}" [style]="{'width':'140px'}">
                    <ng-template pTemplate="body" let-backend="rowData" let-i="rowIndex">
                        <a (click)="configModify(backend)" style="margin-right:10px;" >Modify</a>
                        <a (click)="deleteBackend(backend)">Delete</a>
                    </ng-template>
                </p-column>
            </p-dataTable>
        </div>
        <div class="right-sidebar-footer">
            <div style="margin-top:100px;">
                <button pButton type="button" (click)="closeSidebar()" label="Cancel" class="ui-button-default"></button>
            </div>
        </div>
    </div>
    
</p-sidebar>
